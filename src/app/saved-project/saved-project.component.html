<div class="container mt-4">
    <h2 class="text-center mb-4">Saved Projects</h2>
  
    <!-- Search Input -->
    <div class="mb-3">
      <input
        type="text"
        [(ngModel)]="searchQuery"
        class="form-control"
        placeholder="Search projects..."
        (input)="filterProjects()"
      />
    </div>
  
    <!-- Parent Table -->
    <table class="table table-bordered table-hover">
      <thead class="thead-light">
        <tr>
          <th (click)="sortData('projectName')"><i class="bi bi-sort-up">Project Name</i></th>
          <th (click)="sortData('projectCode')"><i class="bi bi-sort-up">Project Code</i></th>
          <th (click)="sortData('location')">Location</th>
          <th (click)="sortData('contractor')">Contractor</th>
          <th (click)="sortData('consultant')">Consultant</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let project of projects; let i = index">
          <td>{{ project.projectName }}</td>
          <td>{{ project.projectCode }}</td>
          <td>{{ project.location }}</td>
          <td>{{ project.contractor }}</td>
          <td>{{ project.consultant }}</td>
          <td>
            <button
              class="btn btn-primary"
              (click)="navigateToAddChild(project.id)"
            >
              Add
            </button>
            <button
              class="btn btn-secondary ml-2"
              (click)="toggleChildData(i)"
            >
              {{ expandedRowIndex === i ? 'Hide Details' : 'Show Details' }}
            </button>
            <tr *ngIf="expandedRowIndex === i">
                <td colspan="6">
                  <div *ngIf="project.children?.length">
                    <h5>Child Data:</h5>
                    <table class="table table-sm table-bordered">
                      <thead>
                        <tr>
                          <th >Pump Series</th>
                          <th>Pump Model</th>
                          <!-- <th>Flow</th>
                          <th>Head</th>
                          <th>Pump Size</th>
                          <th>Application</th>
                          <th>Configuration</th>
                          <th>Quantity</th> -->
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let child of project.children">
                          <td>{{ child.pumpSeries }}</td>
                          <td>{{ child.pumpModel }}</td>
                          <!-- <td>{{ child.flow }}</td>
                          <td>{{ child.head }}</td>
                          <td>{{ child.pumpSize }}</td>
                          <td>{{ child.application }}</td>
                          <td>{{ child.configuration }}</td>
                          <td>{{ child.quantity }}</td> -->
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div *ngIf="!project.children?.length">
                    <p>No child data available for this project.</p>
                  </div>
                </td>
              </tr>
          </td>
        </tr>
  
        <!-- Collapsible Child Rows -->
       
